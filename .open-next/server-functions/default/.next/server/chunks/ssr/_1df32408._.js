module.exports=[91693,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(68114),f=a.i(30617),g=a.i(60246),h=a.i(3314),i=a.i(73570),j=a.i(96101),k=a.i(9777),l=a.i(91965),m=a.i(4720),n=a.i(21161),o=a.i(53722);let p=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var q=a.i(50522),r=a.i(72131);let s=[{href:"/dashboard",label:"Dashboard",icon:f.LayoutDashboard},{href:"/cases",label:"Offboarding Cases",icon:j.FolderOpen},{href:"/employees",label:"Employees",icon:g.Users},{href:"/artifacts",label:"Access Artifacts",icon:h.Shield},{href:"/findings",label:"Findings",icon:i.AlertTriangle},{href:"/apps",label:"OAuth Apps",icon:k.Grid3X3},{href:"/scan-history",label:"Scan History",icon:l.History},{href:"/audit-log",label:"Audit Log",icon:m.FileText},{href:"/settings",label:"Settings",icon:n.Settings},{href:"/docs",label:"Documentation",icon:o.BookOpen}];function t(){let a=(0,d.usePathname)(),[f,g]=(0,r.useState)(!1);return(0,b.jsxs)("aside",{className:(0,e.cn)("flex flex-col border-r bg-card transition-all duration-200",f?"w-16":"w-64"),children:[(0,b.jsxs)("div",{className:"flex h-14 items-center border-b px-4",children:[!f&&(0,b.jsxs)(c.default,{href:"/dashboard",className:"flex items-center gap-2",children:[(0,b.jsx)(h.Shield,{className:"h-6 w-6 text-primary"}),(0,b.jsx)("span",{className:"font-semibold text-lg",children:"JML"})]}),(0,b.jsx)("button",{onClick:()=>g(!f),className:(0,e.cn)("ml-auto rounded-md p-1.5 hover:bg-accent",f&&"mx-auto"),children:f?(0,b.jsx)(q.ChevronRight,{className:"h-4 w-4"}):(0,b.jsx)(p,{className:"h-4 w-4"})})]}),(0,b.jsx)("nav",{className:"flex-1 overflow-y-auto py-2",children:s.map(d=>{let g=a===d.href||a.startsWith(d.href+"/");return(0,b.jsxs)(c.default,{href:d.href,className:(0,e.cn)("flex items-center gap-3 px-4 py-2.5 text-sm transition-colors","hover:bg-accent hover:text-accent-foreground",g?"bg-accent text-accent-foreground font-medium":"text-muted-foreground",f&&"justify-center px-2"),title:f?d.label:void 0,children:[(0,b.jsx)(d.icon,{className:"h-4 w-4 shrink-0"}),!f&&(0,b.jsx)("span",{children:d.label})]},d.href)})}),(0,b.jsx)("div",{className:"border-t p-4",children:!f&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Frappe SoR v1.0"})})]})}a.s(["Sidebar",()=>t],91693)},47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},18894,a=>{"use strict";var b=a.i(87924),c=a.i(99570),d=a.i(35732),e=a.i(72131),f=a.i(50104),g=a.i(46872),h=a.i(72752),i=a.i(30553),j=a.i(87610);function k(){return()=>{}}var l="Avatar",[m,n]=(0,f.createContextScope)(l),[o,p]=m(l),q=e.forwardRef((a,c)=>{let{__scopeAvatar:d,...f}=a,[g,h]=e.useState("idle");return(0,b.jsx)(o,{scope:d,imageLoadingStatus:g,onImageLoadingStatusChange:h,children:(0,b.jsx)(i.Primitive.span,{...f,ref:c})})});q.displayName=l;var r="AvatarImage",s=e.forwardRef((a,c)=>{let{__scopeAvatar:d,src:f,onLoadingStatusChange:l=()=>{},...m}=a,n=p(r,d),o=function(a,{referrerPolicy:b,crossOrigin:c}){let d=(0,j.useSyncExternalStore)(k,()=>!0,()=>!1),f=e.useRef(null),g=d?(f.current||(f.current=new window.Image),f.current):null,[i,l]=e.useState(()=>v(g,a));return(0,h.useLayoutEffect)(()=>{l(v(g,a))},[g,a]),(0,h.useLayoutEffect)(()=>{let a=a=>()=>{l(a)};if(!g)return;let d=a("loaded"),e=a("error");return g.addEventListener("load",d),g.addEventListener("error",e),b&&(g.referrerPolicy=b),"string"==typeof c&&(g.crossOrigin=c),()=>{g.removeEventListener("load",d),g.removeEventListener("error",e)}},[g,c,b]),i}(f,m),q=(0,g.useCallbackRef)(a=>{l(a),n.onImageLoadingStatusChange(a)});return(0,h.useLayoutEffect)(()=>{"idle"!==o&&q(o)},[o,q]),"loaded"===o?(0,b.jsx)(i.Primitive.img,{...m,ref:c,src:f}):null});s.displayName=r;var t="AvatarFallback",u=e.forwardRef((a,c)=>{let{__scopeAvatar:d,delayMs:f,...g}=a,h=p(t,d),[j,k]=e.useState(void 0===f);return e.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>k(!0),f);return()=>window.clearTimeout(a)}},[f]),j&&"loaded"!==h.imageLoadingStatus?(0,b.jsx)(i.Primitive.span,{...g,ref:c}):null});function v(a,b){return a?b?(a.src!==b&&(a.src=b),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}u.displayName=t,a.s(["Avatar",()=>q,"AvatarFallback",()=>u,"AvatarImage",()=>s,"Fallback",()=>u,"Image",()=>s,"Root",()=>q,"createAvatarScope",()=>n],3740);var w=a.i(3740),w=w,x=a.i(68114);function y({className:a,size:c="default",...d}){return(0,b.jsx)(w.Root,{"data-slot":"avatar","data-size":c,className:(0,x.cn)("group/avatar relative flex size-8 shrink-0 overflow-hidden rounded-full select-none data-[size=lg]:size-10 data-[size=sm]:size-6",a),...d})}function z({className:a,...c}){return(0,b.jsx)(w.Fallback,{"data-slot":"avatar-fallback",className:(0,x.cn)("bg-muted text-muted-foreground flex size-full items-center justify-center rounded-full text-sm group-data-[size=sm]/avatar:text-xs",a),...c})}var A=a.i(70106);let B=(0,A.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var C=a.i(46842);let D=(0,A.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),E=(0,A.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var F=a.i(13902),G=a.i(50944);function H({user:a}){let{theme:e,setTheme:f}=(0,F.useTheme)(),g=(0,G.useRouter)(),h=a?.full_name?.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2)||"AD",i=async()=>{await fetch("/api/auth/logout",{method:"POST"}),g.push("/login")};return(0,b.jsxs)("header",{className:"flex h-14 items-center justify-between border-b bg-card px-6",children:[(0,b.jsx)("div",{}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(c.Button,{variant:"ghost",size:"icon",onClick:()=>f("dark"===e?"light":"dark"),children:[(0,b.jsx)(E,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,b.jsx)(D,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),(0,b.jsxs)(d.DropdownMenu,{children:[(0,b.jsx)(d.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(c.Button,{variant:"ghost",className:"flex items-center gap-2",children:[(0,b.jsx)(y,{className:"h-7 w-7",children:(0,b.jsx)(z,{className:"text-xs",children:h})}),(0,b.jsx)("span",{className:"text-sm",children:a?.full_name||"Administrator"})]})}),(0,b.jsxs)(d.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(d.DropdownMenuItem,{children:[(0,b.jsx)(C.User,{className:"mr-2 h-4 w-4"}),"Profile"]}),(0,b.jsx)(d.DropdownMenuSeparator,{}),(0,b.jsxs)(d.DropdownMenuItem,{onClick:i,className:"text-destructive",children:[(0,b.jsx)(B,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]})}a.s(["Header",()=>H],18894)},85614,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30118),e=a.i(99570),f=a.i(66718),g=a.i(96221),h=a.i(92759),i=a.i(45222),j=a.i(62213),j=j,k=a.i(70106);let l=(0,k.default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),m=(0,k.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var n=a.i(50944);let o="ogm-chat-messages";function p(){return[]}function q(){let a=(0,n.useRouter)(),[k,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(p),[v,w]=(0,c.useState)(""),x=(0,c.useRef)(null),y=(0,d.useChatMutation)();(0,c.useEffect)(()=>{try{localStorage.setItem(o,JSON.stringify(t))}catch{}},[t]),(0,c.useEffect)(()=>{k&&!r&&x.current?.scrollIntoView({behavior:"smooth"})},[t,k,r]);let z=(0,c.useCallback)(()=>{u([]),localStorage.removeItem(o)},[]),A=(0,c.useCallback)(b=>{b.startsWith("/")&&a.push(b)},[a]);return k?r?(0,b.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 rounded-full bg-primary px-4 py-3 text-primary-foreground shadow-lg",children:[(0,b.jsx)(i.MessageCircle,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"OGM Chat"}),(0,b.jsx)("button",{onClick:()=>s(!1),className:"ml-2 rounded-full p-1 hover:bg-primary-foreground/20","aria-label":"Expand chat",children:(0,b.jsx)(i.MessageCircle,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>{q(!1),s(!1)},className:"rounded-full p-1 hover:bg-primary-foreground/20","aria-label":"Close chat",children:(0,b.jsx)(j.default,{className:"h-4 w-4"})})]}):(0,b.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex w-96 flex-col rounded-xl border bg-background shadow-2xl",style:{height:"500px"},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-t-xl bg-primary px-4 py-3 text-primary-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.MessageCircle,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"text-sm font-semibold",children:"OGM Help Assistant"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:z,className:"rounded-full p-1.5 hover:bg-primary-foreground/20","aria-label":"Clear chat",title:"Clear chat",children:(0,b.jsx)(m,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>s(!0),className:"rounded-full p-1.5 hover:bg-primary-foreground/20","aria-label":"Minimize chat",children:(0,b.jsx)(l,{className:"h-4 w-4"})}),(0,b.jsx)("button",{onClick:()=>{q(!1),s(!1)},className:"rounded-full p-1.5 hover:bg-primary-foreground/20","aria-label":"Close chat",children:(0,b.jsx)(j.default,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[0===t.length&&(0,b.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,b.jsx)(i.MessageCircle,{className:"h-10 w-10 mx-auto mb-3 opacity-40"}),(0,b.jsx)("p",{className:"text-sm",children:"Ask about cases, findings, remediation, or anything in OGM."})]}),t.map((a,c)=>(0,b.jsx)("div",{className:`flex ${"user"===a.role?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-[85%] rounded-lg px-3 py-2 ${"user"===a.role?"bg-primary text-primary-foreground":"bg-muted"}`,children:[(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:a.content.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>")}}),a.sources&&a.sources.length>0&&(0,b.jsxs)("div",{className:"mt-2 pt-2 border-t border-border/50",children:[(0,b.jsx)("p",{className:"text-xs font-medium mb-1",children:"Sources:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.sources.map((a,c)=>(0,b.jsx)("button",{onClick:()=>A(a.url),className:"text-xs text-primary hover:underline underline-offset-2 cursor-pointer",children:a.title},c))})]})]})},c)),y.isPending&&(0,b.jsx)("div",{className:"flex justify-start",children:(0,b.jsxs)("div",{className:"bg-muted rounded-lg px-3 py-2 flex items-center gap-2",children:[(0,b.jsx)(g.Loader2,{className:"h-3 w-3 animate-spin"}),(0,b.jsx)("span",{className:"text-sm",children:"Thinking..."})]})}),(0,b.jsx)("div",{ref:x})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=v.trim();b&&!y.isPending&&(w(""),u(a=>[...a,{role:"user",content:b}]),y.mutate(b,{onSuccess:a=>{u(b=>[...b,{role:"assistant",content:a.reply??"",sources:a.sources}])},onError:()=>{u(a=>[...a,{role:"assistant",content:"Sorry, something went wrong. Please try again."}])}}))},className:"flex gap-2 border-t p-3",children:[(0,b.jsx)(f.Input,{value:v,onChange:a=>w(a.target.value),placeholder:"Ask a question...",disabled:y.isPending,className:"flex-1 h-9 text-sm"}),(0,b.jsx)(e.Button,{type:"submit",size:"sm",disabled:!v.trim()||y.isPending,className:"h-9 w-9 p-0",children:y.isPending?(0,b.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(h.Send,{className:"h-4 w-4"})})]})]}):(0,b.jsx)("button",{onClick:()=>q(!0),className:"fixed bottom-6 right-6 z-50 flex h-14 w-14 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-all hover:scale-105 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","aria-label":"Open chat",children:(0,b.jsx)(i.MessageCircle,{className:"h-6 w-6"})})}a.s(["ChatWidget",()=>q],85614)}];

//# sourceMappingURL=_1df32408._.js.map