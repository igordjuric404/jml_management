module.exports=[36701,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(30118),f=a.i(91119),g=a.i(99570),h=a.i(86304),i=a.i(6015),j=a.i(35732),k=a.i(15055),l=a.i(96221),m=a.i(70106);let n=(0,m.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=a.i(3314),p=a.i(43108);let q=(0,m.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var r=a.i(5784),s=a.i(46842),t=a.i(38246);function u(){let a=(0,d.useSearchParams)(),m=a.get("employee"),u=a.get("email"),{data:v,isLoading:w}=(0,e.useEmployees)(),x=(0,c.useMemo)(()=>{if(m)return m;if(u&&v){let a=v.find(a=>a.company_email?.toLowerCase()===u.toLowerCase());return a?.employee_id??null}return null},[m,u,v]),{data:y,isLoading:z}=(0,e.useEmployeeDetail)(x??""),A=(0,e.useRevokeEmployeeAccess)(x??""),[B,C]=(0,c.useState)(new Set),D=!!x&&(z||y);return w&&!D?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):D&&y?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(t.default,{href:"/employees",children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(n,{className:"mr-2 h-4 w-4"}),"Back to Employees"]})}),(0,b.jsxs)(g.Button,{variant:"destructive",onClick:()=>{confirm("Revoke all access for this employee?")&&A.mutate("all")},disabled:A.isPending,children:[A.isPending?(0,b.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(o.Shield,{className:"mr-2 h-4 w-4"}),"Revoke All Access"]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-base",children:"Employee Info"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Name"}),(0,b.jsx)("p",{className:"font-medium",children:y.employee.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Email"}),(0,b.jsx)("p",{children:(0,b.jsx)(t.default,{href:`/employees?email=${encodeURIComponent(y.employee.email)}`,className:"text-primary hover:underline",children:y.employee.email})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Status"}),(0,b.jsx)("p",{children:(0,b.jsx)(h.Badge,{variant:"Active"===y.employee.status?"default":"destructive",className:"Active"===y.employee.status?"bg-green-600 text-white":void 0,children:y.employee.status})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Department"}),(0,b.jsx)("p",{children:y.employee.department||"-"})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:y.summary.total_cases}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Cases"})]})}),(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:y.summary.active_artifacts}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Artifacts"})]})}),(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:y.summary.open_findings}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Open Findings"})]})}),(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:y.summary.apps_used}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Apps Used"})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-base",children:"Applications"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"App"}),(0,b.jsx)(i.TableHead,{children:"Client ID"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Risk"})]})}),(0,b.jsx)(i.TableBody,{children:y.apps?.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(t.default,{href:`/apps?client_id=${encodeURIComponent(a.client_id)}`,className:"text-primary hover:underline",children:a.app_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("code",{className:"text-xs",children:a.client_id})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"secondary",children:a.status})}),(0,b.jsx)(i.TableCell,{children:a.risk_level?(0,b.jsx)(h.Badge,{variant:"destructive",children:a.risk_level}):"-"})]},a.artifact_name))})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-base",children:"Findings"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Name"}),(0,b.jsx)(i.TableHead,{children:"Type"}),(0,b.jsx)(i.TableHead,{children:"Severity"}),(0,b.jsx)(i.TableHead,{children:"Summary"})]})}),(0,b.jsx)(i.TableBody,{children:y.findings?.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(t.default,{href:`/findings?finding=${encodeURIComponent(a.name)}`,className:"text-primary hover:underline font-medium",children:a.name})}),(0,b.jsx)(i.TableCell,{children:a.finding_type}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"destructive",children:a.severity})}),(0,b.jsx)(i.TableCell,{className:"max-w-xs truncate",children:a.summary})]},a.name))})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-base",children:"Associated Cases"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Case"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Effective Date"})]})}),(0,b.jsx)(i.TableBody,{children:y.cases?.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(t.default,{href:`/cases/${a.name}`,className:"text-primary hover:underline font-medium",children:a.name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"secondary",children:a.status})}),(0,b.jsx)(i.TableCell,{children:a.effective_date?new Date(a.effective_date).toLocaleDateString():"-"})]},a.name))})]})})]})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Employee Access Overview"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"View and manage employee access across cases and apps"})]}),(0,b.jsxs)(j.DropdownMenu,{children:[(0,b.jsx)(j.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",disabled:0===B.size,children:[(0,b.jsx)(r.ChevronDown,{className:"mr-2 h-4 w-4"}),"Bulk Revoke (",B.size,")"]})}),(0,b.jsxs)(j.DropdownMenuContent,{children:[(0,b.jsxs)(j.DropdownMenuItem,{onClick:()=>{confirm("Revoke all access for selected employees?")&&B.forEach(a=>{alert("Use Revoke All from employee detail view")})},children:[(0,b.jsx)(o.Shield,{className:"mr-2 h-4 w-4"}),"Revoke All"]}),(0,b.jsxs)(j.DropdownMenuItem,{children:[(0,b.jsx)(p.Lock,{className:"mr-2 h-4 w-4"}),"Revoke Tokens"]}),(0,b.jsxs)(j.DropdownMenuItem,{children:[(0,b.jsx)(q,{className:"mr-2 h-4 w-4"}),"Delete ASPs"]})]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-base",children:"Employees"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{className:"w-10",children:(0,b.jsx)(k.Checkbox,{checked:v&&v.length>0&&v.every(a=>B.has(a.employee_id)),onCheckedChange:()=>{v&&(B.size===v.length?C(new Set):C(new Set(v.map(a=>a.employee_id))))}})}),(0,b.jsx)(i.TableHead,{children:"Employee"}),(0,b.jsx)(i.TableHead,{children:"Email"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Cases"}),(0,b.jsx)(i.TableHead,{children:"Active Artifacts"}),(0,b.jsx)(i.TableHead,{children:"Open Findings"}),(0,b.jsx)(i.TableHead,{})]})}),(0,b.jsx)(i.TableBody,{children:v?.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(k.Checkbox,{checked:B.has(a.employee_id),onCheckedChange:()=>{var b;return b=a.employee_id,void C(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})}})}),(0,b.jsx)(i.TableCell,{className:"font-medium",children:(0,b.jsx)(t.default,{href:`/employees?employee=${encodeURIComponent(a.employee_id)}`,className:"text-primary hover:underline",children:a.employee_name})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(t.default,{href:`/employees?email=${encodeURIComponent(a.company_email)}`,className:"text-primary hover:underline",children:a.company_email})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"Active"===a.emp_status?"default":"destructive",className:"Active"===a.emp_status?"bg-green-600 text-white":void 0,children:a.emp_status})}),(0,b.jsx)(i.TableCell,{children:a.case_count??0}),(0,b.jsx)(i.TableCell,{children:a.active_artifacts??0}),(0,b.jsx)(i.TableCell,{children:a.open_findings??0}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(t.default,{href:`/employees?employee=${encodeURIComponent(a.employee_id)}`,children:(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(s.User,{className:"mr-2 h-4 w-4"}),"Details"]})})})]},a.employee_id))})]})})]})]})}function v(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),children:(0,b.jsx)(u,{})})}a.s(["default",()=>v],36701)}];

//# sourceMappingURL=src_app_%28app%29_employees_page_tsx_ce800f7e._.js.map