(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var s=e.i(43476),a=e.i(75157);function t({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function r({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function n({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}e.s(["Card",()=>t,"CardContent",()=>l,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>n])},60754,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(90472),r=e.i(15288),n=e.i(19455),i=e.i(93479),l=e.i(31278),d=e.i(14764),c=e.i(94983),o=e.i(22016);function x(){let[e,x]=(0,a.useState)([]),[u,m]=(0,a.useState)(""),h=(0,a.useRef)(null),f=(0,t.useChatMutation)();return(0,a.useEffect)(()=>{h.current?.scrollIntoView({behavior:"smooth"})},[e]),(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"AI Chat"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Ask questions about OGM, cases, findings, and remediation"})]}),(0,s.jsxs)(r.Card,{className:"flex flex-col h-[600px]",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsxs)(r.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,s.jsx)(c.MessageCircle,{className:"h-5 w-5"}),"Chat"]})}),(0,s.jsxs)(r.CardContent,{className:"flex-1 flex flex-col min-h-0 p-0",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===e.length&&(0,s.jsxs)("div",{className:"text-center text-muted-foreground py-12",children:[(0,s.jsx)(c.MessageCircle,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{children:"Start a conversation. Ask about cases, findings, or remediation."})]}),e.map((e,a)=>(0,s.jsx)("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,s.jsxs)("div",{className:`max-w-[85%] rounded-lg px-4 py-2 ${"user"===e.role?"bg-primary text-primary-foreground":"bg-muted"}`,children:[(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),e.sources&&e.sources.length>0&&(0,s.jsxs)("div",{className:"mt-2 pt-2 border-t border-border/50",children:[(0,s.jsx)("p",{className:"text-xs font-medium mb-1",children:"Sources:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.sources.map((e,a)=>(0,s.jsx)(o.default,{href:e.url,className:"text-xs text-primary hover:underline underline-offset-2",children:e.title},a))})]})]})},a)),f.isPending&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsxs)("div",{className:"bg-muted rounded-lg px-4 py-2 flex items-center gap-2",children:[(0,s.jsx)(l.Loader2,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{className:"text-sm",children:"Thinking..."})]})}),(0,s.jsx)("div",{ref:h})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=u.trim();s&&!f.isPending&&(m(""),x(e=>[...e,{role:"user",content:s}]),f.mutate(s,{onSuccess:e=>{x(s=>[...s,{role:"assistant",content:e.reply??"",sources:e.sources}])},onError:()=>{x(e=>[...e,{role:"assistant",content:"Sorry, something went wrong. Please try again."}])}}))},className:"flex gap-2 p-4 border-t",children:[(0,s.jsx)(i.Input,{value:u,onChange:e=>m(e.target.value),placeholder:"Ask a question...",disabled:f.isPending,className:"flex-1"}),(0,s.jsx)(n.Button,{type:"submit",disabled:!u.trim()||f.isPending,children:f.isPending?(0,s.jsx)(l.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(d.Send,{className:"h-4 w-4"})})]})]})]})]})}e.s(["default",()=>x])}]);