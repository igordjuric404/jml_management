(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3387,e=>{"use strict";var l=e.i(43476),a=e.i(71645),s=e.i(90472),t=e.i(15288),n=e.i(19455),i=e.i(87486),r=e.i(84774),o=e.i(76639),d=e.i(67489),c=e.i(31278);let m=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var h=e.i(22016),u=e.i(18566),x=e.i(1851),j=e.i(92374);let p={Draft:"secondary",Scheduled:"default","Gaps Found":"destructive","All Clear":"default",Remediated:"default",Closed:"secondary"};function b({status:e}){let a=p[e]??"secondary";return(0,l.jsx)(i.Badge,{variant:a,className:"Scheduled"===e?"bg-blue-500/90 text-white border-blue-600":"All Clear"===e||"Remediated"===e?"bg-green-600 text-white border-green-700":void 0,children:e})}function C(){let e=(0,u.useRouter)(),{sortConfig:i,onSort:p,sortData:C}=(0,j.useSort)(),{data:f,isLoading:y}=(0,s.useCases)(),{data:g}=(0,s.useEmployees)(),S=(0,s.useCreateCaseFromEmployee)(),[v,T]=(0,a.useState)(!1),[N,_]=(0,a.useState)("");return y?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)(c.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Offboarding Cases"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Manage access review and remediation cases"})]}),(0,l.jsxs)(n.Button,{onClick:()=>T(!0),children:[(0,l.jsx)(m,{className:"mr-2 h-4 w-4"}),"New Case"]})]}),(0,l.jsxs)(t.Card,{children:[(0,l.jsx)(t.CardHeader,{children:(0,l.jsx)(t.CardTitle,{className:"text-base",children:"All Cases"})}),(0,l.jsx)(t.CardContent,{children:(0,l.jsxs)(r.Table,{children:[(0,l.jsx)(r.TableHeader,{children:(0,l.jsxs)(r.TableRow,{children:[(0,l.jsx)(j.SortableTableHead,{column:"name",label:"Case ID",sortConfig:i,onSort:p}),(0,l.jsx)(j.SortableTableHead,{column:"employee_name",label:"Employee",sortConfig:i,onSort:p}),(0,l.jsx)(j.SortableTableHead,{column:"primary_email",label:"Email",sortConfig:i,onSort:p}),(0,l.jsx)(j.SortableTableHead,{column:"event_type",label:"Event Type",sortConfig:i,onSort:p}),(0,l.jsx)(j.SortableTableHead,{column:"status",label:"Status",sortConfig:i,onSort:p}),(0,l.jsx)(j.SortableTableHead,{column:"effective_date",label:"Effective Date",sortConfig:i,onSort:p}),(0,l.jsx)(j.SortableTableHead,{column:"scheduled_remediation_date",label:"Scheduled Remediation",sortConfig:i,onSort:p})]})}),(0,l.jsx)(r.TableBody,{children:(f?C(f):[]).map(a=>(0,l.jsxs)(r.TableRow,{className:"cursor-pointer",onClick:()=>e.push(`/cases/${a.name}`),children:[(0,l.jsx)(r.TableCell,{className:"font-medium",children:(0,l.jsx)(h.default,{href:`/cases/${a.name}`,className:"text-primary hover:underline",onClick:e=>e.stopPropagation(),children:a.name})}),(0,l.jsx)(r.TableCell,{children:(0,l.jsx)(h.default,{href:`/employees?employee=${encodeURIComponent(a.employee)}`,className:"text-primary hover:underline",onClick:e=>e.stopPropagation(),children:a.employee_name})}),(0,l.jsx)(r.TableCell,{children:(0,l.jsx)(h.default,{href:`/employees?email=${encodeURIComponent(a.primary_email)}`,className:"text-primary hover:underline",onClick:e=>e.stopPropagation(),children:a.primary_email})}),(0,l.jsx)(r.TableCell,{children:a.event_type}),(0,l.jsx)(r.TableCell,{children:(0,l.jsx)(b,{status:a.status})}),(0,l.jsx)(r.TableCell,{children:a.effective_date?(0,x.format)(new Date(a.effective_date),"PP"):"-"}),(0,l.jsx)(r.TableCell,{children:a.scheduled_remediation_date?(0,x.format)(new Date(a.scheduled_remediation_date),"PP"):"-"})]},a.name))})]})})]}),(0,l.jsx)(o.Dialog,{open:v,onOpenChange:T,children:(0,l.jsxs)(o.DialogContent,{children:[(0,l.jsx)(o.DialogHeader,{children:(0,l.jsx)(o.DialogTitle,{children:"New Offboarding Case"})}),(0,l.jsx)("div",{className:"space-y-4 py-4",children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:"Employee"}),(0,l.jsxs)(d.Select,{value:N,onValueChange:_,children:[(0,l.jsx)(d.SelectTrigger,{className:"w-full",children:(0,l.jsx)(d.SelectValue,{placeholder:"Select employee..."})}),(0,l.jsx)(d.SelectContent,{children:g?.map(e=>(0,l.jsxs)(d.SelectItem,{value:e.employee_id,children:[e.employee_name," (",e.employee_id,")"]},e.employee_id))})]})]})}),(0,l.jsxs)(o.DialogFooter,{children:[(0,l.jsx)(n.Button,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,l.jsx)(n.Button,{onClick:()=>{N&&S.mutate(N,{onSuccess:()=>{T(!1),_("")}})},disabled:!N||S.isPending,children:S.isPending?(0,l.jsx)(c.Loader2,{className:"h-4 w-4 animate-spin"}):"Create Case"})]})]})})]})}e.s(["default",()=>C],3387)}]);