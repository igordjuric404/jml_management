(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31171,e=>{"use strict";let l=(0,e.i(75254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>l])},99219,e=>{"use strict";let l=(0,e.i(75254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["default",()=>l])},64659,e=>{"use strict";var l=e.i(31171);e.s(["ChevronDown",()=>l.default])},27051,e=>{"use strict";var l=e.i(43476),s=e.i(71645),a=e.i(90472),t=e.i(15288),r=e.i(84774),i=e.i(46798),n=e.i(87486),d=e.i(19455),c=e.i(31278),o=e.i(64659),h=e.i(99219),h=h,m=e.i(22016),x=e.i(1851);function j(){let{data:e,isLoading:j}=(0,a.useAuditLog)(),[u,T]=(0,s.useState)(new Set);return j?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)(c.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,l.jsx)(i.TooltipProvider,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Audit Log"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Immutable record of all OGM actions and their outcomes"})]}),(0,l.jsxs)(t.Card,{children:[(0,l.jsx)(t.CardHeader,{children:(0,l.jsx)(t.CardTitle,{className:"text-base",children:"Log Entries"})}),(0,l.jsx)(t.CardContent,{children:(0,l.jsxs)(r.Table,{children:[(0,l.jsx)(r.TableHeader,{children:(0,l.jsxs)(r.TableRow,{children:[(0,l.jsx)(r.TableHead,{className:"w-10"}),(0,l.jsx)(r.TableHead,{children:"Name"}),(0,l.jsx)(r.TableHead,{children:"Action Type"}),(0,l.jsx)(r.TableHead,{children:"Actor"}),(0,l.jsx)(r.TableHead,{children:"Target Email"}),(0,l.jsx)(r.TableHead,{children:"Result"}),(0,l.jsx)(r.TableHead,{children:"Timestamp"})]})}),(0,l.jsx)(r.TableBody,{children:e?.map(e=>(0,l.jsxs)(s.Fragment,{children:[(0,l.jsxs)(r.TableRow,{children:[(0,l.jsx)(r.TableCell,{children:e.request_json&&(0,l.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{var l;return l=e.name,void T(e=>{let s=new Set(e);return s.has(l)?s.delete(l):s.add(l),s})},children:u.has(e.name)?(0,l.jsx)(h.default,{className:"h-4 w-4"}):(0,l.jsx)(o.ChevronDown,{className:"h-4 w-4"})})}),(0,l.jsx)(r.TableCell,{className:"font-medium",children:e.name}),(0,l.jsx)(r.TableCell,{children:e.action_type}),(0,l.jsx)(r.TableCell,{children:e.actor_user}),(0,l.jsx)(r.TableCell,{children:(0,l.jsx)(m.default,{href:`/employees?email=${encodeURIComponent(e.target_email)}`,className:"text-primary hover:underline",children:e.target_email})}),(0,l.jsx)(r.TableCell,{children:(0,l.jsx)(n.Badge,{variant:"Success"===e.result?"default":"destructive",children:e.result})}),(0,l.jsx)(r.TableCell,{children:(0,l.jsxs)(i.Tooltip,{children:[(0,l.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,l.jsx)("span",{children:e.timestamp?(0,x.format)(new Date(e.timestamp),"PPp"):"-"})}),(0,l.jsx)(i.TooltipContent,{children:e.timestamp})]})})]}),u.has(e.name)&&e.request_json&&(0,l.jsx)(r.TableRow,{children:(0,l.jsx)(r.TableCell,{colSpan:7,className:"bg-muted/50 p-4",children:(0,l.jsx)("p",{className:"text-xs font-mono whitespace-pre-wrap break-all",children:e.request_json})})})]},e.name))})]})})]})]})})}e.s(["default",()=>j],27051)}]);